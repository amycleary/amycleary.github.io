$(function(){var $body,$nav,$window,init,navOffsetTop,onScroll,resize,setupGallery,smoothScroll,wrapRows;$nav=$(".navbar");$body=$("body");$window=$(window);navOffsetTop=$nav.offset().top;init=function(){$window.on("resize",resize);$window.on("scroll",onScroll);$('a[href^="/#"], a[href^="#"]').on("click",smoothScroll);return setupGallery()};resize=function(){$body.removeClass("has-docked-nav");navOffsetTop=$nav.offset().top;return onScroll()};onScroll=function(){var scrollTop;scrollTop=$window.scrollTop();if(navOffsetTop<scrollTop&&!$body.hasClass("has-docked-nav")){$body.addClass("has-docked-nav")}if(navOffsetTop>scrollTop&&$body.hasClass("has-docked-nav")){return $body.removeClass("has-docked-nav")}};smoothScroll=function(e){var $header,$target,target;e.preventDefault();$(document).off("scroll");target=this.hash;$header=$(".site-header");$target=$(target);console.log(target,$target.offset().top);return $("body").stop().animate({scrollTop:$target.offset().top-$header.height()-20},500,"swing",function(){window.location.hash=target;return $(document).on("scroll",onScroll)})};wrapRows=function(){var $divs,cols,i,results;cols=$(".row-wrap").data("cols");$divs=$(".row-wrap .columns");i=0;results=[];while(i<$divs.length){$divs.slice(i,i+3).wrapAll("<div class='row'></div>");results.push(i+=3)}return results};setupGallery=function(){var img,imgElements,imgSelector,items,pswpElement;imgSelector="article > section > img";pswpElement=document.querySelectorAll(".pswp")[0];imgElements=document.querySelectorAll(imgSelector);if(imgElements.length){items=function(){var j,len,results;results=[];for(j=0,len=imgElements.length;j<len;j++){img=imgElements[j];results.push({src:img.currentSrc,w:img.naturalWidth,h:img.naturalHeight})}return results}();$(imgSelector).css("cursor","pointer");return $(imgSelector).on("click",function(event){var index;index=$(imgSelector).index(event.target);return new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,{index:index}).init()})}};return init()});